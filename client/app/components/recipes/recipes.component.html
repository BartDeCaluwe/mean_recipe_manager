<h1>My Recipes</h1>
<hr>
<div class="container">
    <h4>Add Recipe</h4>
    <form [formGroup]="myForm" novalidate (ngSubmit)="addRecipe(myForm.value)" class="well">
        <!--name-->
        <div class="form-group">
            <label>Recipe Name</label>
            <input type="text" formControlName="name">
            <small [hidden]="myForm.controls.name.valid || myForm.controls.name.pristine"
                class="alert alert-danger">
                Name is required
            </small>
        </div>
        <!--list of ingredients-->
        <div formArrayName="ingredients">
            <div *ngFor="let ingredient of myForm.controls.ingredients.controls; let i=index">
                <div>
                    <span>Ingredient {{i + 1 }}</span>
                    <a (click)="removeIngredient(i)" style="cursor: default">Remove</a>
                </div>
                <div [formGroupName]="i">
                    <ingredient [group]="myForm.controls.ingredients.controls[i]"></ingredient>
                </div>
            </div>
        </div>
        <div class="margin-20">
          <a (click)="addIngredient()" style="cursor: default">
            Add another ingredient +
          </a>
        </div>
        <div class="form-group">
            <label>Recipe instructions</label>
            <textarea formControlName="body" id="bodyTextArea" cols="70" rows="5" style="width: 100%"></textarea>
            <small [hidden]="myForm.controls.body.valid || myForm.controls.body.pristine"
                class="alert alert-danger">
                Instructions are required
            </small>
        </div>
        <button type="submit" [disabled]="!myForm.valid">Submit</button>
    </form>
</div>
<div class="recipe-list">
    <div class="row recipeRow" *ngFor="let recipe of recipes">
        <div class="col-md-3">
            {{ recipe.name }}
        </div>
        <div class="col-md-6">
            <p *ngFor="let ingredient of recipe.ingredients">
                {{ ingredient.name}} | {{ ingredient.quantity }}
            </p>
        </div>
        <div class="col-md-3">
            <input type="button" (click)="deleteRecipe(recipe._id)" class="btn btn-danger" value="Delete">
        </div>
    </div>
    <hr>
</div>